@model StockTradeViewModel
@{
	ViewBag.Title = Model.StockName;
	var sellActionUrl = Url.Action("SellOrder", "Trade");
	var buyActionUrl = Url.Action("BuyOrder", "Trade");
}

<div class="flex box trading-panel">

	<div id="stock-price-panel">
		<h1 class="stock-title">@Model.StockName (<span id="stock-symbol">@Model.StockSymbol</span>)</h1>
		<h1>
			<span class="text-grey">$ </span><span id="stock-price">@Model.Price</span>
		</h1>
	</div>

	<div id="new-order-panel">
		<h3 class="mb text-grey">New Order</h3>

		<form method="post">
			<div class="flex form-field">
				<div class="w-25">
					<label for="Quantity" class="mt">Quantity</label>
				</div>
				<div class="flex-1">
					<input type="number" name="Quantity" id="Quantity" value="@Model.Quantity" min="1" max="100000" placeholder="Quantity" required="required" class="form-input mb" autofocus="autofocus" />
				</div>
			</div>

			<div class="button-panel">

				<button type="submit" formaction="~/trade/sell-order" class="trading-button button-red-back">
					<i class="fa-solid fa-arrow-up"></i>
					<span>Sell</span>
				</button>

				<button type="submit" formaction="~/trade/buy-order" class="trading-button button-green-back">
					<i class="fa-solid fa-arrow-down"></i>
					<span>Buy</span>
				</button>

				@if (ViewBag.Errors != null)
				{
					<div class="text-red mt">
						<ul>
							@foreach (string error in ViewBag.Errors)
							{
								<li class="ml">@error</li>
							}
						</ul>
					</div>
				}

			</div>

			<input type="hidden" name="StockSymbol" value="@Model.StockSymbol" />
			<input type="hidden" name="StockName" value="@Model.StockName" />
			<input id="order-form-price" type="hidden" name="Price" value="@Model.Price" />
		</form>
	</div>
</div>

@*	I recognise that this is an unsafe method of passing sensitive data but it is stipulated in the assignment brief.
	In practice I would AJAX for the data to be sent by the backend. *@
<input type="hidden" id="finnhub-api-key" value="@ViewBag.FinnHubAPIKey" />
<script src="~/Scripts/FinnhubWebsocketScript.js" />